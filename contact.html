<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact ‚Äì SoluCIE (Complexe H√¥telier Emmanuella)</title>
  <meta name="color-scheme" content="dark">
  <!--
    ‚úÖ S√©curit√© (exemple de CSP stricte). √Ä ADAPTER c√¥t√© serveur en production :
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'self';
                   img-src 'self' data: https:;
                   style-src 'self' https://cdn.jsdelivr.net 'unsafe-inline';
                   script-src 'self' https://cdn.jsdelivr.net;
                   font-src https://fonts.gstatic.com https://cdn.jsdelivr.net;
                   connect-src 'self';
                   frame-ancestors 'none'; upgrade-insecure-requests;">
    - Pas d'inline JS dans la page : tout JS est regroup√© en bas.
    - Aucun attribut on* (onClick, onSubmit...) : √©vite le XSS par injection.
  -->

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <!-- Th√®me commun -->
  <link rel="stylesheet" href="./style2-cie.css">
</head>
<body>
  <!-- Navbar (coh√©rente avec les autres pages) -->
  <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="index.html">
        <i class="bi bi-lightning-charge text-primary fs-4 me-2" aria-hidden="true"></i>
        <span class="fw-bold">SoluCIE</span>
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Basculer la navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse mt-3 mt-lg-0" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a href="index.html" class="nav-link">Dashboard</a></li>
          <li class="nav-item"><a href="recharger.html" class="nav-link">Recharger</a></li>
          <li class="nav-item"><a href="compteur.html" class="nav-link">Compteurs</a></li>
          <li class="nav-item"><a href="historique.html" class="nav-link">Historique</a></li>
          <!-- ‚úÖ Actif sur CETTE page -->
          <li class="nav-item"><a href="contact.html" class="nav-link active" aria-current="page">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <section class="hero pt-4 pb-2">
    <div class="container text-center">
      <div class="glow-circle" aria-hidden="true">
        <i class="bi bi-chat-dots"></i>
      </div>
      <h1 class="mb-2">Nous contacter</h1>
      <p class="mt-2">
        Besoin d'aide sur une recharge, un compteur ou l'acc√®s √† la plateforme ? Envoyez‚Äënous un message.
      </p>
      <!-- Infos rapides -->
      <div class="d-flex flex-wrap gap-3 justify-content-center mt-3">
        <span class="text-small-note"><i class="bi bi-shield-lock me-1"></i> Donn√©es trait√©es en interne</span>
        <span class="text-small-note"><i class="bi bi-clock-history me-1"></i> R√©ponse sous 24h ouvr√©es</span>
      </div>
    </div>
  </section>

  <!-- FORMULAIRE DE CONTACT (Grand public / interne) -->
  <main class="pb-5">
    <div class="container">
      <div class="row gy-4">
        <div class="col-lg-7">
          <div class="card p-4 elevate-on-hover">
            <h4 class="text-white fw-bold mb-3"><i class="bi bi-envelope-paper-heart me-2 text-primary"></i>Formulaire</h4>

            <!--
              üîí Bonnes pratiques s√©curit√©/UX :
              - Champs avec attributs HTML5 de validation (required, type, pattern).
              - Aucune ex√©cution JS inline : on utilise addEventListener plus bas.
              - Champ "honeypot" cach√© : bloque la majorit√© des bots simples.
              - Activation du bouton apr√®s consentement CGU/Confidentialit√©.
              - aria-live sur la zone de statut pour lecteurs d‚Äô√©cran.
            -->
            <form id="contactForm" class="needs-validation" novalidate aria-describedby="helpPrivacy">
              <!-- Anti‚ÄëCSRF (placeholder √† remplir c√¥t√© serveur) -->
              <input type="hidden" name="csrf_token" value="__A_REMPLACER_COTE_SERVEUR__" />

              <!-- Honeypot INVISIBLE pour pi√©ger les bots -->
              <div class="position-absolute" style="left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;">
                <label for="website">Votre site web (ne pas remplir)</label>
                <input id="website" name="website" type="text" tabindex="-1" autocomplete="off">
              </div>

              <div class="row g-3">
                <div class="col-md-6">
                  <label for="fullname" class="form-label">Nom complet</label>
                  <input id="fullname" name="fullname" type="text" class="form-control" placeholder="Ex : MOBIO Hilaire Axel" required>
                  <div class="invalid-feedback">Votre nom complet est requis.</div>
                </div>
                <div class="col-md-6">
                  <label for="telephone" class="form-label">T√©l√©phone</label>
                  <input id="telephone" name="telephone" type="tel" class="form-control" placeholder="07 47 12 34 56"
                         pattern="[0-9+ ]{8,20}" required>
                  <div class="invalid-feedback">Indiquez un num√©ro valide.</div>
                </div>
                <div class="col-md-8">
                  <label for="email" class="form-label">E‚Äëmail</label>
                  <input id="email" name="email" type="email" class="form-control" placeholder="exemple@domaine.com" required autocomplete="email">
                  <div class="invalid-feedback">Adresse e‚Äëmail invalide.</div>
                </div>
                <div class="col-md-4">
                  <label for="topic" class="form-label">Sujet</label>
                  <select id="topic" name="topic" class="form-select" required>
                    <option value="" disabled selected>Choisir‚Ä¶</option>
                    <option>Assistance Recharge</option>
                    <option>Gestion Compteurs</option>
                    <option>Acc√®s / Connexion</option>
                    <option>Autre question</option>
                  </select>
                  <div class="invalid-feedback">S√©lectionnez un sujet.</div>
                </div>
                <div class="col-12">
                  <label for="message" class="form-label">Message</label>
                  <textarea id="message" name="message" rows="5" class="form-control" placeholder="D√©crivez clairement votre demande‚Ä¶"
                            minlength="20" maxlength="1500" required></textarea>
                  <div class="form-text text-small-note">20 √† 1500 caract√®res. Pas d‚Äôinfos sensibles (num√©ro de carte, code PIN, etc.).</div>
                  <div class="invalid-feedback">Votre message est trop court.</div>
                </div>
                <div class="col-md-6">
                  <label for="attachment" class="form-label">Pi√®ce jointe (optionnel)</label>
                  <input id="attachment" name="attachment" class="form-control" type="file" accept=".png,.jpg,.jpeg,.pdf">
                  <div class="form-text text-small-note">Preuve de paiement, capture d‚Äô√©cran, PDF‚Ä¶ (max 5 Mo c√¥t√© serveur).</div>
                </div>
                <div class="col-md-6">
                  <label for="meter" class="form-label">N¬∞ Compteur (optionnel)</label>
                  <input id="meter" name="meter" type="text" class="form-control" placeholder="Ex : 24212919633" inputmode="numeric" autocomplete="off">
                </div>

                <div class="col-12">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="1" id="agree" required>
                    <label class="form-check-label" for="agree">
                      J‚Äôai lu et j‚Äôaccepte la politique de confidentialit√© et les CGU.
                    </label>
                    <div id="helpPrivacy" class="form-text text-small-note">
                      Vos donn√©es sont utilis√©es pour traiter votre demande. Aucun partage √† des tiers sans votre accord.
                    </div>
                    <div class="invalid-feedback">Vous devez accepter pour envoyer.</div>
                  </div>
                </div>
              </div>

              <div class="d-grid mt-3">
                <button id="btnSend" type="submit" class="btn btn-primary py-2 fw-semibold" disabled>
                  <i class="bi bi-send-check me-2"></i> Envoyer le message
                </button>
              </div>
            </form>

            <!-- Zone de statut -->
            <div id="contactStatus" class="mt-3 text-center fw-semibold" role="status" aria-live="polite"></div>
          </div>
        </div>

        <!-- Carte d‚Äôinformations & acc√®s directs -->
        <div class="col-lg-5">
          <div class="card p-4 h-100">
            <h5 class="card-title-accent mb-3">Coordonn√©es</h5>
            <ul class="list-unstyled mb-4">
              <li class="mb-2"><i class="bi bi-geo-alt me-2"></i> Songon Dagb√©, Abidjan, C√¥te d‚ÄôIvoire</li>
              <li class="mb-2"><i class="bi bi-telephone me-2"></i> +225 07 47 12 34 56</li>
              <li class="mb-2"><i class="bi bi-envelope me-2"></i> support@solucie.ci</li>
            </ul>

            <div class="d-grid gap-2">
              <a href="tel:+2250747123456" class="btn btn-success">
                <i class="bi bi-telephone-outbound me-2"></i> Appeler le support
              </a>
              <a href="https://wa.me/2250747123456" class="btn btn-outline-light" target="_blank" rel="noopener">
                <i class="bi bi-whatsapp me-2"></i> WhatsApp Support
              </a>
            </div>

            <hr class="my-4">

            <h6 class="mb-2">FAQ rapide</h6>
            <div class="accordion" id="faq">
              <div class="accordion-item bg-transparent border">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#q1">
                    D√©lai d‚Äôune recharge ?
                  </button>
                </h2>
                <div id="q1" class="accordion-collapse collapse" data-bs-parent="#faq">
                  <div class="accordion-body text-small-note">
                    La plupart des recharges sont confirm√©es en moins de 2 minutes. Si ce n‚Äôest pas le cas, contactez‚Äënous.
                  </div>
                </div>
              </div>
              <div class="accordion-item bg-transparent border mt-2">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#q2">
                    Modes de paiement accept√©s ?
                  </button>
                </h2>
                <div id="q2" class="accordion-collapse collapse" data-bs-parent="#faq">
                  <div class="accordion-body text-small-note">
                    Orange Money, MTN Money, Moov Money et Wave.
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    ¬© <span id="year"></span> Complexe H√¥telier Emmanuella | Syst√®me de Recharge √âlectrique Intelligente
  </footer>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
  <script defer>
    // Petite lib utilitaire
    const $ = (s) => document.querySelector(s);

    // Synchronise l'ann√©e du footer
    document.addEventListener('DOMContentLoaded', () => {
      const y = new Date().getFullYear();
      const span = document.getElementById('year'); if (span) span.textContent = y;
    });

    // Active/d√©sactive le bouton en fonction du consentement
    const agree = document.getElementById('agree');
    const btnSend = document.getElementById('btnSend');
    agree.addEventListener('change', () => { btnSend.disabled = !agree.checked; });

    // Validation + Honeypot + Simulation d‚Äôenvoi s√©curis√©
    const form = document.getElementById('contactForm');
    const status = document.getElementById('contactStatus');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      form.classList.add('was-validated');

      // Honeypot : si rempli -> on stoppe
      if (document.getElementById('website').value.trim() !== '') {
        status.className = 'mt-3 text-center fw-semibold text-danger';
        status.textContent = 'Requ√™te bloqu√©e (bot d√©tect√©).';
        return;
      }

      if (!form.checkValidity()) return;

      // Exemple de payload propre (sanitisation c√¥t√© serveur INDISPENSABLE)
      const data = new FormData(form);

      // UI : feedback imm√©diat
      btnSend.disabled = true;
      btnSend.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Envoi‚Ä¶';
      status.className = 'mt-3 text-center fw-semibold text-small-note';
      status.textContent = 'Transmission s√©curis√©e‚Ä¶';

      try {
        // üîß Int√©gration r√©elle : POST vers votre backend
        // const res = await fetch('/api/contact', { method: 'POST', body: data, credentials: 'include' });
        // if (!res.ok) throw new Error('Erreur serveur');
        await new Promise(r => setTimeout(r, 1200)); // simulation

        status.className = 'mt-3 text-center fw-semibold text-success';
        status.textContent = '‚úÖ Message envoy√©. Nous vous r√©pondrons sous 24h ouvr√©es.';
        form.reset();
        form.classList.remove('was-validated');
      } catch (err) {
        status.className = 'mt-3 text-center fw-semibold text-danger';
        status.textContent = '‚ùå Impossible d‚Äôenvoyer le message pour le moment.';
      } finally {
        btnSend.disabled = !agree.checked;
        btnSend.innerHTML = '<i class="bi bi-send-check me-2"></i> Envoyer le message';
      }
    });
  </script>
</body>
</html>
